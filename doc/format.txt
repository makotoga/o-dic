――――――――――沖縄辞書の書式の規定――――――――――

この文書によってテキストの書式が規定されて、それに従って沖縄
辞書のデータが書かれている…というよりも、実はある時点で「現
状でどうなっているか」を逆に文書化したものにすぎない。

つまり、何らかの都合で沖縄辞書のデータ書式を変更する必要が生
じたならば、この文書も一緒に改定するかぎり、どんどん変更して
よいということだ。

にもかかわらず、こうやって文書化する意味は、たとえば沖縄辞書
のデータの変換スクリプトを書くときなどに、現状のデータががど
ういうルールで書かれているのかをいちいち実データを観察して解
析するというのでは非効率的だからだ。また、データの書式が不明
確なために無意味な不統一性が生じる、というような事態を避ける
ためでもある。


1. ファイル

沖縄辞書のデータファイルは複数のプレインなテキストファイルか
ら構成される。

ファイル名は英小文字および数字のみからなり、ファイル名の拡張
子は「.dic」だ。

テキストの改行はLF(0x0a)のみ。(つまりUnixのテキストファイル)

日本語のエンコーディングにはUTF-8を使う。ただし、EUCやシフト
JISのようなJIS X 0208の範囲内の文字しか扱えない場合に対応する
ため、そのような文字を含む場合にはコメントに「〓あり」を記述
することでスクリプトによる変換時に当該単語を除外できるように
すること。また、JIS X 0208範囲外の文字をカナに置き換えた代用
表記を用意することを推奨する。

また、2014年のデータ変換以前に使用していたISO-2022-JPの
データもGitリポジトリーのiso2022jpブランチに残している。
できるかぎり、iso2022jpブランチ内の.dicファイルの内容も
masterブランチの内容を反映することが望ましい。

iso2022jp ブランチでの作業例

    $ git -b iso2022jp your_userid@git.osdn.net:/gitroot/o-dic/o-dic.git o-dic-iso2022jp
    $ cd o-dic-iso2022jp
    (辞書ファイルを編集)
    $ git commit example.dic
    $ git push


2. 行

「#」から行末までは、コメントとして読み飛ばされる(ないものと
みなされる)。

その上で(コメントを取り去った後の状態で)、行は
	(1) データ行
	(2) 空行
のどちらかである。

(1)に実際のデータが入っているわけで、 1行につき1つの単語の分
のデータが書かれている。

データ行には、
	(a) 読み
	(b) 単語
	(c) 品詞分類
の3つのフィールドがこの順に書かれる。 「読み」は行の先頭から
始まっていなければならない。

3つのフィールドは互いに空白もしくはタブで区切られる。 タブ、
もしくは空白、もしくはそれらをとりまぜたものが複数個連続して
いても1つの区切りとみなされる。 変換スクリプトなど、このファ
イルを「読む」立場のものは、空白・タブのどちらも区切り用のも
のとして認識しなければいけないが、データを入力する側の立場は
タブ(0x09)のみをデータの区切りとして、空白(0x20)は混ぜないよ
うにするべきだ。

空行とは、行の先頭から末尾までの間に、タブ(0x09)もしくは空白
(0x20)のどちらか(もしくはその両方)しか含まれないような行のこ
とである。

空行はデータとしては何も意味がない。空行はファイル中にいくつ
あっても、また、どの場所にでてきてもかまわないので、読みやす
さのために適当に挿入してよい。


3. 読み

読みを示す文字列は20文字以内で、使える文字は平仮名(ただし、
「ゐ」「ゑ」を除く)および「ヴ」そして「ー」の合計83種類の文
字である。具体的には以下の通り

	あいうえおかきくけこさしすせそたちつてと
	なにぬねのはひふへほまみむめもらりるれろ
	がぎぐげござじずぜぞだぢづでどばびぶべぼ
	ぁぃぅぇぉっょゃゅゎぱぴぷぺぽやゆよわを
	んヴー

ちなみに、日本語入力ソフトによっては「16文字以内」という制限
のものもあるし、JIS X 4062では「15文字以内」だ。変換スクリプ
トを作成する場合にはそれらも考慮する必要があるだろうし、場合
によっては、単語を追加する人もそのことを意識する必要があるか
もしれない。


4. 単語

単語を示す文字列は32文字以内。ほとんどの文字が使えるが、空白
やタブや改行はもちろん使えないし、 「"」や「,」や「#」も使え
ない。


5. 品詞分類

品詞分類は以下の24種類。JIS X 4062 を参考にしてある。

   1. 普通名詞
   2. サ変名詞
   3. 形動名詞
   4. 姓
   5. 名
   6. その他の人名
   7. 単純地名
   8. 接尾語付き地名
   9. 組織名
  10. その他固有名詞	(JIS X 4062では「その他の固有名詞」)
  11. 副詞
  12. 接続詞
  13. 感動詞
  14. 形容詞
  15. 形容動詞
  16. 接頭語		(JIS X 4062では小分類にはない)
  17. 数字列接頭語
  18. 接尾語		(JIS X 4062では小分類にはない)
  19. 人名接尾語
  20. 地名接尾語
  21. 組織名接尾語
  22. 数字列接尾語
  23. 成句
  24. 無品詞

沖縄辞書のデータを変換するスクリプトを作成する場合には、以上
の24種類の品詞分類について完全に処理すべきである。逆に言うと、
データを入力する側の立場では、この24種類以外を使うと変換スク
リプトが実行中にエラーになってしまうわけだ。

また、今後この品詞分類を拡張する(もっと種類を増やす)場合は、
JIS X 4062にある以下のものから選ぶべきだろう。

   1. 連体詞
   2. カ行五段
   3. サ行五段
   4. タ行五段
   5. ナ行五段
   6. マ行五段
   7. ラ行五段
   8. ワ行五段
   9. ガ行五段
  10. バ行五段
  11. 一段動詞
  12. カ変動詞
  13. サ変動詞
  14. ザ変動詞


6. コメント

各行の「#」以降のコメントには1行に収まる範囲内で何でも書くことはできるが、
いくつかの条件が有る。

* 茶筌向けの辞書から除外する必要がある行にはマーカー記号"@@@"を書く必要が有る。
  この記号は MS-IME / Mozc 向け辞書のコメントでは削除される。
* JIS X 0208 範囲外の文字を含む場合にはコメントに「〓あり」を書く。
  これによって JIS X 0208 までしかサポートしない処理系向けに、JIS X 0208 範囲外の
  文字を含む行を出力から除外することが出きるようになる。新しく追加した行が
  これらの文字を含んでいるか確認する場合には script/geta_checker.sh が使用できる。

